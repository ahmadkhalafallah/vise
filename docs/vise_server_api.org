#+Title: VISE Server REST API Reference
#+Author: Abhishek Dutta <adutta@robots.ox.ac.uk>
#+Date: 18 June 2018

|-------------------------------------------------+--------+----------------------------------------+-----------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---+---|
| endpoint                                        | method | url parameters                         | data parameters | success response                                                           | error response                         | example | notes |   |   |
|-------------------------------------------------+--------+----------------------------------------+-----------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---+---|
| /vise/admin                                     | POST   |                                        |                 | endpoint for all administrative tasks releated to search engines           |                                        |         |       |   |   |
| /vise/admin/_list                               |        |                                        |                 | for a load balanced system (with data mirrored across servers),            |                                        |         |       |   |   |
| /vise/admin/_delete                             |        |                                        |                 | the admin operations can only be served by the master node.                |                                        |         |       |   |   |
| /vise/admin/_rename                             |        |                                        |                 |                                                                            |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/                   |        |                                        |                 | show the home page for a search engine (containing tools, image list, etc) |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_init              |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_add_file          |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_del_file          |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_file_list         |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_index_start       |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_index_stop        |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_index_status      |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/admin/_NAME_/_VERSION_/_index_log         |        |                                        |                 |                                                                            |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/query/_NAME_/_VERSION_/_search            | GET    | file_id,region,from,result_count |                 |                                                                            |                                        |         |       |   |   |
| /vise/query/_NAME_/_VERSION_/_filelist          | GET    | [from,to]                              |                 | {filelist_size:INTEGER, from:INTEGER, to:INTEGER, _filelist_subset:[] }    |                                        |         |       |   |   |
| /vise/query/_NAME_/_VERSION_/_file              | GET    | file_id, filename                      | n/a             | contents of file                                                           |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
| /vise/asset/_NAME_/_VERSION_/image/filename.jpg | GET    | n/a                                    | n/a             | file content                                                               |                                        |         |       |   |   |
| /vise/asset/_NAME_/_VERSION_/image/__FILE_ID__  | GET    | n/a                                    | n/a             | file content                                                               |                                        |         |       |   |   |
|                                                 |        |                                        |                 |                                                                            |                                        |         |       |   |   |
|-------------------------------------------------+--------+----------------------------------------+-----------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---+---|
| /vise/search_engine/_NAME_/                     | GET    |                                        |                 | details about the search engine                                            | {error:"search engine does not exist"} |         |       |   |   |

**VOID** (below this)
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_add_image      | POST   | filename=[string]                           | base64 encoded image data         | {id:UNIQUE_IMAGE_ID, filename:"FILENAME"}                                  | {error:"invalid file"}                 |         |       |   |
|                                            |        |                                             |                                   |                                                                            |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_del_image      | POST   | [id], [filename]                            |                                   | {id:UNIQUE_IMAGE_ID, filename:"FILENAME"}                                  | {error:"cannot delete file"}           |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_list_image     | GET    |                                             |                                   | {ARRAY OF UNIQUE IMAGE ID}                                                 |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_index_start    | POST   |                                             | [] to index all images            | {ok:"started"}                                                             | {error:"cannot start indexing"}        |         |       |   |
|                                            |        |                                             | [ARRAY] to index specified images |                                                                            |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_index_status   | GET    |                                             |                                   | {json describing the status of indexing process}                           |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_index_log      | GET    |                                             |                                   | text file containing log of indexing process                               |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
| /vise/search_engine/_NAME_/_index_stop     | POST   |                                             | {"delete_all_temp_file":true}     | {ok:"stopped indexing"}                                                    |                                        |         |       |   |
|--------------------------------------------+--------+---------------------------------------------+-----------------------------------+----------------------------------------------------------------------------+----------------------------------------+---------+-------+---|
|                                            |        |                                             |                                   |                                                                            |                                        |         |       |   |
  //
  // POST /vise/admin/_NAME_/_VERSION_/{init, add_file, index_start, index_status, rename, engine_exists, set_config, load, unload}
  // GET  /vise/query/_NAME_/_VERSION_/{image_id_list, image, search}
  //
